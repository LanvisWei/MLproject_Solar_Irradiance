import pandas as pd
import matplotlib.pyplot as plt

# 加載數據
file_path = 'MLproject_Solar_Irradiance\test\modified_data_1999_to_2024.csv'
data = pd.read_csv(file_path)

# 將相關列轉換為數字類型
data['平均氣溫'] = pd.to_numeric(data['平均氣溫'], errors='coerce')
data['絕對最高氣溫'] = pd.to_numeric(data['絕對最高氣溫'], errors='coerce')
data['絕對最低氣溫'] = pd.to_numeric(data['絕對最低氣溫'], errors='coerce')
data['總日照時數h'] = pd.to_numeric(data['總日照時數h'], errors='coerce')
data['總日射量MJ/ m2'] = pd.to_numeric(data['總日射量MJ/ m2'], errors='coerce')

# 按行政區和年份分組數據
grouped_data = data.groupby(['行政區', 'Year'])

# 平均溫度折線圖
plt.figure(figsize=(12, 6))
for name, group in grouped_data:
    region = name[0]
    yearly_data = group.groupby('Year')['平均氣溫'].mean()
    plt.plot(yearly_data.index, yearly_data.values, label=region)

plt.title('平均溫度按行政區分布')
plt.xlabel('年份')
plt.ylabel('平均溫度 (°C)')
plt.legend()
plt.grid(True)
plt.show()
